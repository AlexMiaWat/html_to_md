# Конвертер HTML в Markdown

Коллекция скриптов на Python для конвертации HTML-контента в формат Markdown, с специальной обработкой таблиц и извлечением структурированного текста.

## Возможности

- Конвертация HTML-файлов, URL или строк в текст Markdown
- Автоматическая конвертация таблиц в формат Markdown таблиц
- Иерархический парсинг HTML для извлечения структурированного текста
- Поддержка множественных источников ввода (файлы, URL, stdin)
- Поддержка кодировки UTF-8
- Игнорирование технических тегов (script, style, meta и т.д.)
- Доступно в английской (grok_html2md.py) и русской (html2md.py) версиях

## Установка

1. Убедитесь, что у вас установлен Python 3.x
2. Установите необходимые зависимости:
   ```bash
   pip install requests
   ```
3. Клонируйте или скачайте скрипты в локальную директорию

## Использование

### grok_html2md.py (Английская версия)

#### Конвертация HTML-файла:
```bash
python grok_html2md.py index.html
```

#### Конвертация из URL:
```bash
python grok_html2md.py -u https://example.com
```

#### Конвертация HTML-строки:
```bash
python grok_html2md.py -s "<h1>Title</h1><p>Content</p>"
```

#### Чтение из stdin:
```bash
cat index.html | python grok_html2md.py
```

### html2md.py (Русская версия)

Русская версия имеет идентичную функциональность и использование:

```bash
python html2md.py index.html
python html2md.py -u https://example.com
python html2md.py -s "<h1>Заголовок</h1><p>Содержимое</p>"
```

## Обзор скриптов

### grok_html2md.py
- **Назначение**: Комплексный конвертер HTML в Markdown с поддержкой таблиц
- **Язык**: Английский
- **Возможности**:
  - Строит дерево HTML-элементов для структурированного парсинга
  - Конвертирует таблицы в формат Markdown (| column1 | column2 |)
  - Обрабатывает горизонтальные линии как разделители Markdown (---)
  - Включает отладочный вывод, показывающий структуру дерева HTML
  - Игнорирует теги script, style, meta, link и noscript

### html2md.py
- **Назначение**: Русская версия конвертера HTML
- **Язык**: Русский (комментарии и документация)
- **Возможности**: Идентична grok_html2md.py, но без отладочного вывода
- **Примечание**: Основана на grok_html2md.py, предоставляет более чистый вывод

## Форматы ввода/вывода

### Форматы ввода
- **HTML-файлы**: Локальные файлы .html
- **URL**: Веб-страницы (требуется подключение к интернету)
- **HTML-строки**: Прямой HTML-контент как аргумент командной строки
- **Stdin**: Переданный по конвейеру HTML-контент

### Формат вывода
- Простой текст с форматированием таблиц Markdown
- Каждый HTML-элемент на отдельных строках с разделителями пустых строк
- Таблицы форматируются как:
  ```
  | Заголовок 1 | Заголовок 2 |
  |-------------|-------------|
  | Ячейка 1    | Ячейка 2    |
  ```
- Текст в кодировке UTF-8 выводится в stdout

## Зависимости

- `sys` - Системно-специфические параметры и функции
- `argparse` - Парсинг аргументов командной строки
- `requests` - HTTP-библиотека для получения URL
- `html.parser` - Библиотека парсинга HTML (встроенная)

## Тестирование

Запустите набор тестов для проверки функциональности:

```bash
python test_html2md_scripts.py
```

Набор тестов будет:
- Обрабатывать множественные веб-сайты и локальные файлы
- Генерировать детальные отчеты в `test_results/test_report.md`
- Сравнивать вывод между grok_html2md.py и html2md.py
- Проверять обнаружение таблиц и количество строк

## Примеры

### Обработка локального HTML-файла:
```bash
python grok_html2md.py index.html > output.md
```

### Конвертация веб-страницы:
```bash
python html2md.py -u https://habr.com/ru/articles/123456/ > article.md
```

### Пакетная обработка множественных файлов:
```bash
for file in *.html; do
  python grok_html2md.py "$file" > "${file%.html}.md"
done
```

## Вклад в проект

1. Форкните репозиторий
2. Создайте ветку для новой возможности
3. Внесите свои изменения
4. Добавьте тесты, если применимо
5. Отправьте pull request

## Лицензия

Этот проект является открытым исходным кодом. Пожалуйста, проверьте заголовки отдельных скриптов для информации о конкретной лицензии.